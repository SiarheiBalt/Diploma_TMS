{"ast":null,"code":"import _regeneratorRuntime from\"D:/GIT/Diploma_TMS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/GIT/Diploma_TMS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import firebase from\"firebase/app\";import\"firebase/firestore\";import\"firebase/database\";var firebaseui=require(\"firebaseui\");export var InitializeFirebase=function InitializeFirebase(){var firebaseConfig={apiKey:\"AIzaSyBVg8nXDmrZr7925r3Dx-hjedFF2BjXYpk\",authDomain:\"diploma-4c274.firebaseapp.com\",databaseURL:\"https://diploma-4c274-default-rtdb.firebaseio.com\",projectId:\"diploma-4c274\",storageBucket:\"diploma-4c274.appspot.com\",messagingSenderId:\"889247481727\",appId:\"1:889247481727:web:4a58d9149c454f44c4644a\"};// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);};export function getDatabase(_x){return _getDatabase.apply(this,arguments);}function _getDatabase(){_getDatabase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(base){var db,paymentCostDb;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return firebase.database().ref(\"\".concat(base)).once(\"value\");case 2:db=_context.sent;_context.next=5;return db.val();case 5:paymentCostDb=_context.sent;return _context.abrupt(\"return\",paymentCostDb);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getDatabase.apply(this,arguments);}export function removeItemDatabase(_x2,_x3){return _removeItemDatabase.apply(this,arguments);}function _removeItemDatabase(){_removeItemDatabase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,base){var db;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return firebase.database().ref(\"\".concat(base,\"/\").concat(id));case 2:db=_context2.sent;_context2.next=5;return db.remove();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _removeItemDatabase.apply(this,arguments);}export function setArrayInDatabase(_x4,_x5){return _setArrayInDatabase.apply(this,arguments);}function _setArrayInDatabase(){_setArrayInDatabase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(arr,base){var db;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return firebase.database().ref(\"\".concat(base));case 2:db=_context3.sent;_context3.next=5;return db.set(arr);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _setArrayInDatabase.apply(this,arguments);}export function addElDatabase(_x6,_x7){return _addElDatabase.apply(this,arguments);}function _addElDatabase(){_addElDatabase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(item,base){var db,newPoster;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return firebase.database().ref(\"\".concat(base));case 2:db=_context4.sent;_context4.next=5;return db.push(item);case 5:newPoster=_context4.sent;case 6:case\"end\":return _context4.stop();}}},_callee4);}));return _addElDatabase.apply(this,arguments);}export function readDatabase(_x8){return _readDatabase.apply(this,arguments);}function _readDatabase(){_readDatabase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(base){var db,responseDb;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return firebase.database().ref(\"\".concat(base)).once(\"value\");case 2:db=_context5.sent;_context5.next=5;return db.val();case 5:responseDb=_context5.sent;return _context5.abrupt(\"return\",responseDb);case 7:case\"end\":return _context5.stop();}}},_callee5);}));return _readDatabase.apply(this,arguments);}export function initializeAuthAdmin(_x9,_x10){return _initializeAuthAdmin.apply(this,arguments);}function _initializeAuthAdmin(){_initializeAuthAdmin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(login,password){var authResponse;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return firebase.auth().signInWithEmailAndPassword(\"\".concat(login),\"\".concat(password));case 3:_context6.next=5;return firebase.auth().onAuthStateChanged(function(user){return user&&(authResponse=user.uid);});case 5:return _context6.abrupt(\"return\",authResponse);case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](0);return _context6.abrupt(\"return\",_context6.t0);case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[0,8]]);}));return _initializeAuthAdmin.apply(this,arguments);}export function signOutAdmin(){return _signOutAdmin.apply(this,arguments);}function _signOutAdmin(){_signOutAdmin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return firebase.auth().signOut();case 3:_context7.next=8;break;case 5:_context7.prev=5;_context7.t0=_context7[\"catch\"](0);console.log(_context7.t0);case 8:case\"end\":return _context7.stop();}}},_callee7,null,[[0,5]]);}));return _signOutAdmin.apply(this,arguments);}export function checkOutOf(){return _checkOutOf.apply(this,arguments);}function _checkOutOf(){_checkOutOf=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var userCurrent;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return firebase.auth().currentUser;case 2:userCurrent=_context8.sent;return _context8.abrupt(\"return\",userCurrent?userCurrent:\"user out\");case 4:case\"end\":return _context8.stop();}}},_callee8);}));return _checkOutOf.apply(this,arguments);}window.checkOutOf=checkOutOf;export function sendSignInLinkToEmail(_x11){return _sendSignInLinkToEmail.apply(this,arguments);}function _sendSignInLinkToEmail(){_sendSignInLinkToEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(email){var actionCodeSettings;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;actionCodeSettings={url:\"http://localhost:3000/put-reviews/finishSignUp?cartId=1234\",handleCodeInApp:true};window.localStorage.setItem(\"emailForSignIn\",email);_context9.next=5;return firebase.auth().sendSignInLinkToEmail(email,actionCodeSettings);case 5:_context9.next=10;break;case 7:_context9.prev=7;_context9.t0=_context9[\"catch\"](0);console.log(_context9.t0);case 10:case\"end\":return _context9.stop();}}},_callee9,null,[[0,7]]);}));return _sendSignInLinkToEmail.apply(this,arguments);}export function singInAfterGetMail(){return _singInAfterGetMail.apply(this,arguments);}function _singInAfterGetMail(){_singInAfterGetMail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var storageEmail;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;storageEmail=window.localStorage.getItem(\"emailForSignIn\");_context10.next=4;return firebase.auth().signInWithEmailLink(storageEmail,window.location.href);case 4:window.localStorage.removeItem(\"emailForSignIn\");checkOutOf();_context10.next=11;break;case 8:_context10.prev=8;_context10.t0=_context10[\"catch\"](0);console.log(_context10.t0);case 11:case\"end\":return _context10.stop();}}},_callee10,null,[[0,8]]);}));return _singInAfterGetMail.apply(this,arguments);}export function createUser(_x12,_x13){return _createUser.apply(this,arguments);}function _createUser(){_createUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(email,password){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;_context11.next=3;return firebase.auth().createUserWithEmailAndPassword(email,password);case 3:signOutAdmin();_context11.next=9;break;case 6:_context11.prev=6;_context11.t0=_context11[\"catch\"](0);console.log(_context11.t0);// ..\ncase 9:case\"end\":return _context11.stop();}}},_callee11,null,[[0,6]]);}));return _createUser.apply(this,arguments);}export function delleteUser(){return _delleteUser.apply(this,arguments);}function _delleteUser(){_delleteUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var user;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;_context12.next=3;return firebase.auth().currentUser;case 3:user=_context12.sent;_context12.next=6;return user.delete();case 6:_context12.next=8;return checkOutOf();case 8:_context12.next=13;break;case 10:_context12.prev=10;_context12.t0=_context12[\"catch\"](0);console.log(_context12.t0);case 13:case\"end\":return _context12.stop();}}},_callee12,null,[[0,10]]);}));return _delleteUser.apply(this,arguments);}","map":{"version":3,"sources":["D:/GIT/Diploma_TMS/src/redux/fireBaseFunctions.js"],"names":["firebase","firebaseui","require","InitializeFirebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","getDatabase","base","database","ref","once","db","val","paymentCostDb","removeItemDatabase","id","remove","setArrayInDatabase","arr","set","addElDatabase","item","push","newPoster","readDatabase","responseDb","initializeAuthAdmin","login","password","auth","signInWithEmailAndPassword","onAuthStateChanged","user","authResponse","uid","signOutAdmin","signOut","console","log","checkOutOf","currentUser","userCurrent","window","sendSignInLinkToEmail","email","actionCodeSettings","url","handleCodeInApp","localStorage","setItem","singInAfterGetMail","storageEmail","getItem","signInWithEmailLink","location","href","removeItem","createUser","createUserWithEmailAndPassword","delleteUser","delete"],"mappings":"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","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nimport \"firebase/database\";\n\nconst firebaseui = require(\"firebaseui\");\n\nexport const InitializeFirebase = () => {\n  const firebaseConfig = {\n    apiKey: \"AIzaSyBVg8nXDmrZr7925r3Dx-hjedFF2BjXYpk\",\n    authDomain: \"diploma-4c274.firebaseapp.com\",\n    databaseURL: \"https://diploma-4c274-default-rtdb.firebaseio.com\",\n    projectId: \"diploma-4c274\",\n    storageBucket: \"diploma-4c274.appspot.com\",\n    messagingSenderId: \"889247481727\",\n    appId: \"1:889247481727:web:4a58d9149c454f44c4644a\",\n  };\n\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n};\n\nexport async function getDatabase(base) {\n  const db = await firebase.database().ref(`${base}`).once(\"value\");\n  const paymentCostDb = await db.val();\n  return paymentCostDb;\n}\n\nexport async function removeItemDatabase(id, base) {\n  const db = await firebase.database().ref(`${base}/${id}`);\n  await db.remove();\n}\n\nexport async function setArrayInDatabase(arr, base) {\n  const db = await firebase.database().ref(`${base}`);\n  await db.set(arr);\n}\n\nexport async function addElDatabase(item, base) {\n  const db = await firebase.database().ref(`${base}`);\n  const newPoster = await db.push(item);\n}\n\nexport async function readDatabase(base) {\n  const db = await await firebase.database().ref(`${base}`).once(\"value\");\n  const responseDb = await db.val();\n  return responseDb;\n}\n\nexport async function initializeAuthAdmin(login, password) {\n  try {\n    await firebase.auth().signInWithEmailAndPassword(`${login}`, `${password}`);\n\n    let authResponse;\n    await firebase\n      .auth()\n      .onAuthStateChanged((user) => user && (authResponse = user.uid));\n    return authResponse;\n  } catch (error) {\n    return error;\n  }\n}\n\nexport async function signOutAdmin() {\n  try {\n    await firebase.auth().signOut();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport async function checkOutOf() {\n  const userCurrent = await firebase.auth().currentUser;\n  return userCurrent ? userCurrent : \"user out\";\n}\nwindow.checkOutOf = checkOutOf;\n\nexport async function sendSignInLinkToEmail(email) {\n  try {\n    let actionCodeSettings = {\n      url: `http://localhost:3000/put-reviews/finishSignUp?cartId=1234`,\n\n      handleCodeInApp: true,\n    };\n    window.localStorage.setItem(\"emailForSignIn\", email);\n    await firebase.auth().sendSignInLinkToEmail(email, actionCodeSettings);\n  } catch (er) {\n    console.log(er);\n  }\n}\nexport async function singInAfterGetMail() {\n  try {\n    let storageEmail = window.localStorage.getItem(\"emailForSignIn\");\n    await firebase\n      .auth()\n      .signInWithEmailLink(storageEmail, window.location.href);\n    window.localStorage.removeItem(\"emailForSignIn\");\n    checkOutOf();\n  } catch (er) {\n    console.log(er);\n  }\n}\n\nexport async function createUser(email, password) {\n  try {\n    await firebase.auth().createUserWithEmailAndPassword(email, password);\n    signOutAdmin();\n  } catch (er) {\n    console.log(er);\n    // ..\n  }\n}\n\nexport async function delleteUser() {\n  try {\n    const user = await firebase.auth().currentUser;\n    await user.delete();\n    await checkOutOf();\n  } catch (er) {\n    console.log(er);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}